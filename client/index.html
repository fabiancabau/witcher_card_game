<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <link rel="stylesheet" href="assets/css/main.css">

  <script src="/socket.io/socket.io.js"></script>
  <script src="//code.jquery.com/jquery-2.1.4.min.js"></script>
</head>
<body>
  <div id="game-board">
    <div id="player-top">
      <div class="king-col">
        <div class="king">
        </div>
      </div>
      <div class="game-col">
        <div class="engine-row">
          <div class="magic"></div>
          <div class="mobs">

          </div>
        </div>
        <div class="range-row">
          <div class="magic"></div>
          <div class="mobs">
            <img src="assets/img/cards/test1.png" class="card" alt="">
            <img src="assets/img/cards/test2.png" class="card" alt="">
          </div>
        </div>
        <div class="melee-row">
          <div class="magic"></div>
          <div class="mobs">

          </div>
        </div>
      </div>
      <div class="aux-col">
        <div class="graveyard">
          <img src="assets/img/cards/test3.png" class="card" alt="">
        </div>
        <div class="deck">
          <img src="assets/img/back.jpg" class="card" alt="">
        </div>
      </div>
    </div>
  </div>
  <script>
    var playerHeight = window.innerHeight/2;
    var cards = document.querySelectorAll(".card");

    document.getElementById("player-top").style.height = playerHeight + "px";
    Object.keys(cards).forEach(function (v) {
      cards[v].onclick = function () {
        cards[v].classList.toggle("zoom");
        cards[v].classList.toggle("zoom-in");
      }
    });


    $('.row').on('click', function() {
      socket.emit('play-card', {card_pos: selected_card.attr('card-pos'), row: 'MID', player: 'p1'});
    });

    var socket = io.connect('http://localhost:3000');
    var socket_id = null;
    var selected_card = null;

    socket.on('connected', function (data) {
      console.log(data);

      socket_id = data.socket_id;
      $('#player_id').html('Player id: ' + socket_id);

      $('#card_container').html('');

      $.each(data.hand, function (i, card) {
        $('#card_container').append(
          '<div class="card" card-pos="'+ i +'">'+card.name+'</div>'
        );
      });

      $('.card').on('click', function() {
        selected_card = $(this);
        socket.emit('play-card', {card_pos: selected_card.attr('card-pos'), row: 'MID', player: socket_id});
      });

    });
  </script>
</body>
</html>
